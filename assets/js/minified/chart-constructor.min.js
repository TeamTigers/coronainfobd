$(function(){let a=`lastdays=${differenceFromMarch8()}`;$.get("https://disease.sh/v2/historical/bangladesh?".concat(a),function(){}).done(function(a){let b=[],c=[],d=a.timeline,e=Object.keys(d.cases),f=Object.values(d.cases),g=Object.values(d.recovered);e.forEach(function(a,d){let e=f[d]-f[d-1]||0;b.push([filterDate(a),e]);let h=g[d]-g[d-1]||0;c.push([filterDate(a),h])});let h=function(a){return a.indexOf(Math.max.apply(null,a))},i=b.map(function(a){return a[1]}),j=c.map(function(a){return a[1]}),k=Object.values(d.deaths),l=k.map(function(a,b){return k[b]-k[b-1]||0}),m=e.map(function(a){const b=new Date(a.concat("20").split("/")).toDateString(),c=b.split(" ");return c[1].concat("<br>").concat(c[2])});zingchart.render({id:"affectedSeries",data:singleLineChartGenerator(m,i,"Newly affected"),height:300,width:"100%"}),zingchart.render({id:"rdSeries",data:multiLineChartGenerator(m,j,l),height:300,width:"100%"}),zingchart.loadModules("calendar",function(){zingchart.render({id:"affectedHeatMap",data:heatMapGenerator(b,3,5,["none","#f32160"],"Newly affected","#f32160","Max Affected",i[h(i)],"#f32160",filterDate(e[h(i)])),height:400,width:"100%"}),zingchart.render({id:"recoveredHeatMap",data:heatMapGenerator(c,3,5,["none","#2bbd7e"],"Newly recovered","#2bbd7e","Max Recovered",j[h(j)],"#2bbd7e",filterDate(e[h(j)])),height:400,width:"100%"})})}),$("input").change(function(){$(this).is(":checked")?switchToTraditionalCharts():switchToModernCharts()}),switchToTraditionalCharts()});function switchToModernCharts(){$("#modernCharts").fadeIn(),$("#traditionalCharts").fadeOut()}function switchToTraditionalCharts(){$("#modernCharts").fadeOut(),$("#traditionalCharts").fadeIn()}function differenceFromMarch8(){const a=new Date,b=new Date(2020,2,8);return Math.round(Math.abs((a-b)/86400000))}function filterDate(a){let b=a.concat("20"),c=b.split("/").reverse(),d=c[2];return c[2]=c[1],c[1]=d,c=c.join("-"),c}function heatMapGenerator(a,b,c,d,e,f,g,h,i,j){return{type:"calendar",theme:localStorage.getItem("darkMood")?"dark":"light",options:{year:{text:"2020",visible:!1},startMonth:b,endMonth:c,palette:d,month:{item:{fontFamily:"Google Sans",fontColor:localStorage.getItem("darkMood")?"#ffffff":"black",fontSize:14}},weekday:{values:["","M","","W","","F",""],item:{fontColor:localStorage.getItem("darkMood")?"#ffffff":"gray",fontSize:9}},values:a},labels:[{borderColor:f,borderRadius:10,borderWidth:2,x:"8%",y:"60%",width:"40%",height:"30%"},{text:e,fontFamily:"Google Sans",fontSize:13,fontColor:localStorage.getItem("darkMood")?"#ffffff":"#212121",textAlign:"center",x:"10%",y:"65%",width:"36%"},{text:"%plot-value",defaultValue:"00",fontColor:f,fontFamily:"Google Sans",fontSize:35,textAlign:"center",x:"10%",y:"68%",width:"36%"},{borderColor:i,borderRadius:10,borderWidth:2,x:"52%",y:"60%",width:"40%",height:"30%"},{text:g,fontFamily:"Google Sans",fontSize:13,fontColor:localStorage.getItem("darkMood")?"#ffffff":"#212121",textAlign:"center",x:"54%",y:"65%",width:"36%"},{text:h,fontColor:i,fontFamily:"Google Sans",fontSize:35,textAlign:"center",x:"54%",y:"68%",width:"36%"},{text:j,fontFamily:"Google Sans",fontSize:13,fontColor:localStorage.getItem("darkMood")?"#ffffff":"#212121",padding:2,textAlign:"center",x:"54%",y:"80%",width:"36%"}],tooltip:{text:"%data-day",defaultValue:"Hover mouse/Tap",backgroundColor:"none",borderColor:"none",fontFamily:"Google Sans",fontSize:13,fontColor:localStorage.getItem("darkMood")?"#ffffff":"#212121",padding:2,align:"center",sticky:!0,timeout:3e4,x:"10%",y:"80%",width:"36%"},plotarea:{marginTop:"15%",marginBottom:"55%",marginLeft:"8%",marginRight:"8%"}}}function singleLineChartGenerator(a,b,c){return{globals:{"font-family":"Google Sans"},graphset:[{type:"area","background-color":localStorage.getItem("darkMood")?"#263238":"#fff",utc:!0,plotarea:{"margin-top":"10%","margin-right":"dynamic","margin-bottom":"dynamic","margin-left":"dynamic","adjust-layout":!0},labels:[{text:`${c}: %plot-0-value`,"default-value":"0",color:"#fc8d62",x:"30%",y:50,width:200,"text-align":"left",bold:0,"font-size":"14px","font-weight":"bold"}],"scale-x":{label:{text:"Date Range","font-color":localStorage.getItem("darkMood")?"#fff":"#212","font-size":"14px","font-weight":"normal","offset-x":"10%","font-angle":360},item:{"text-align":"center","font-color":localStorage.getItem("darkMood")?"#00e5ff":"#05636c"},zooming:1,"max-labels":12,labels:a,"max-items":12,"items-overlap":!0,guide:{"line-width":"0px"},tick:{"line-width":"2px"}},"crosshair-x":{"line-color":"#fff","line-width":1,"plot-label":{visible:!1}},"scale-y":{values:`0:${Math.max(...b)}:${Math.min(...b)+2}`,item:{"font-color":localStorage.getItem("darkMood")?"#00e5ff":"#05636c","font-weight":"normal"},label:{text:"Count","font-size":"14px","font-color":localStorage.getItem("darkMood")?"#fff":"#212"},guide:{"line-width":"0px",alpha:.2,"line-style":"dashed"}},plot:{"line-width":2,marker:{size:1,visible:!1},tooltip:{"font-family":"Google Sans","font-size":"15px",text:`${c} %v on %data-days`,"text-align":"left","border-radius":5,padding:10}},series:[{values:b,"data-days":a,"line-color":"#fc8d62",aspect:"spline","background-color":"#fc8d62","alpha-area":".3","font-family":"Google Sans","font-size":"14px",text:"found"}]}]}}function multiLineChartGenerator(a,b,c){return{globals:{"font-family":"Google Sans"},graphset:[{type:"area","background-color":localStorage.getItem("darkMood")?"#263238":"#fff",utc:!0,plotarea:{"margin-top":"10%","margin-right":"dynamic","margin-bottom":"dynamic","margin-left":"dynamic","adjust-layout":!0},labels:[{text:`Death: %plot-1-value`,"default-value":"0",color:"#ff5252",x:"30%",y:50,width:200,"text-align":"left",bold:0,"font-size":"14px","font-weight":"bold"},{text:`Recovered: %plot-0-value`,"default-value":"0",color:"#2979ff",x:"30%",y:70,width:200,"text-align":"left",bold:0,"font-size":"14px","font-weight":"bold"}],"scale-x":{label:{text:"Date Range","font-color":localStorage.getItem("darkMood")?"#fff":"#212","font-size":"14px","font-weight":"normal","offset-x":"10%","font-angle":360},item:{"text-align":"center","font-color":localStorage.getItem("darkMood")?"#00e5ff":"#05636c"},zooming:1,"max-labels":12,labels:a,"max-items":12,"items-overlap":!0,guide:{"line-width":"0px"},tick:{"line-width":"2px"}},"crosshair-x":{"line-color":"#fff","line-width":1,"plot-label":{visible:!1}},"scale-y":{values:`0:${Math.max(Math.max(...b),Math.max(...c))}:${Math.min(...b)+1}`,item:{"font-color":localStorage.getItem("darkMood")?"#00e5ff":"#05636c","font-weight":"normal"},label:{text:"Count","font-size":"14px","font-color":localStorage.getItem("darkMood")?"#fff":"#212"},guide:{"line-width":"0px",alpha:.2,"line-style":"dashed"}},plot:{"line-width":2,marker:{size:1,visible:!1},tooltip:{"font-family":"Google Sans","font-size":"15px",text:`Found %v on %data-days`,"text-align":"left","border-radius":5,padding:10}},series:[{values:b,"data-days":a,"line-color":"#2979ff",aspect:"spline","background-color":"#2979ff","alpha-area":".3","font-family":"Google Sans","font-size":"14px",text:"recovered"},{values:c,"data-days":a,"line-color":"#ff5252",aspect:"spline","background-color":"#ff5252","alpha-area":".3","font-family":"Google Sans","font-size":"14px",text:"dead"}]}]}}